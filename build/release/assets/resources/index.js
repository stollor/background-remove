System.register("chunks:///_virtual/fit-width-height.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,a,h,s,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,h=t.CCFloat,s=t.Node,c=t.UITransform,p=t.Component}],execute:function(){var l,u,d,g,f;r._RF.push({},"2aad1x2rflN/Kadv4eYTpla","fit-width-height",void 0);var C=a.ccclass,v=a.property;t("FitWidthHeight",(l=C("utils/FitWidthHeight"),u=v(h),l((f=e((g=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"ratio",f,o(e)),e}i(e,t);var r=e.prototype;return r.start=function(){this.node.parent.on(s.EventType.SIZE_CHANGED,this.onSizeChange,this)},r.onEnable=function(){this.onSizeChange()},r.onSizeChange=function(){var t=this.node.parent.getComponent(c).width,e=this.node.parent.getComponent(c).height,i=this.node.getComponent(c).width,n=this.node.getComponent(c).height,o=t*this.ratio/i,r=e*this.ratio/n,a=o>r?r:o;this.node.setScale(a,a,1)},e}(p)).prototype,"ratio",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=g))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/fit-width.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,a,s,c,h,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.CCFloat,c=t.Node,h=t.UITransform,l=t.Component}],execute:function(){var u,p,f,d,g;r._RF.push({},"962e4UTruxC66brxAvo2lGf","fit-width",void 0);var v=a.ccclass,y=a.property;t("FitWidth",(u=v("utils/FitWidth"),p=y(s),u((g=e((d=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"ratio",g,o(e)),e}i(e,t);var r=e.prototype;return r.start=function(){this.node.parent.on(c.EventType.SIZE_CHANGED,this.onSizeChange,this)},r.onEnable=function(){this.onSizeChange()},r.onSizeChange=function(){var t=this.node.parent.getComponent(h).width,e=this.node.getComponent(h).width,i=t*this.ratio/e;this.node.setScale(i,i,1)},e}(l)).prototype,"ratio",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=d))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/interface.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"bc752aJZARIf7syx0VPXQ5u","interface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fit-width-height.ts","./tools.ts"],(function(e){var t,n,i,o,r,l,s,a,u,c,p,h,d,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.createClass,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,s=e._decorator,a=e.Sprite,u=e.Node,c=e.Label,p=e.Button,h=e.Component},function(e){d=e.FitWidthHeight},function(e){m=e.tools}],execute:function(){var f,b,w,C,g,y,T,v,_,D,B,z,F;l._RF.push({},"a0794MUmsZLKJ3GZLrPgydh","item",void 0);var L=s.ccclass,k=s.property;e("Item",(f=L("Item"),b=k(a),w=k(a),C=k(u),g=k(u),y=k(c),f((_=t((v=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,o(t,"spOld",_,r(t)),o(t,"spNew",D,r(t)),o(t,"nodeDown",B,r(t)),o(t,"nodeClose",z,r(t)),o(t,"labelTime",F,r(t)),t._downCB=null,t._startTime=null,t}n(t,e);var l=t.prototype;return l.start=function(){this.nodeDown.on(p.EventType.CLICK,this.onClickDown,this),this.nodeClose.on(p.EventType.CLICK,this.onClickClose,this)},l.onClickDown=function(){this._downCB&&this._downCB()},l.onClickClose=function(){this.node.destroy()},l.run=function(e){var t=this;this.schedule(this.updateTime,.5),console.log(e),m.blodToSpriteFrame(m.Base64ToBlob(e.src)).then((function(e){t.spOld.spriteFrame=e,t.scheduleOnce((function(){t.spOld.getComponent(d).onSizeChange()}))})),m.removeBg(e.src).then((function(e){t.spNew.spriteFrame=e.spriteFrame,t.scheduleOnce((function(){t.spNew.getComponent(d).onSizeChange()})),t.nodeDown.getComponent(p).interactable=!0,t._downCB=function(){m.saveFileInBrowser(e.blob,"removebg.png")},t.unschedule(t.updateTime)}))},l.updateTime=function(){this.labelTime.string="耗时\n "+~~(Date.now()-this.startTime)/1e3+" 秒"},i(t,[{key:"startTime",get:function(){return this._startTime||(this._startTime=Date.now()),this._startTime}}]),t}(h)).prototype,"spOld",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(v.prototype,"spNew",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(v.prototype,"nodeDown",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(v.prototype,"nodeClose",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(v.prototype,"labelTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=v))||T));l._RF.pop()}}}));

System.register("chunks:///_virtual/main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./item.ts"],(function(e){var n,t,r,i,a,o,l,s,u,c;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node,s=e.instantiate,u=e.Component},function(e){c=e.Item}],execute:function(){var d,p,f,v,m,w,h;a._RF.push({},"3eeb0+ps3NDbp0LM/3CVwjd","main",void 0);var y=o.ccclass,b=o.property;e("main",(d=y("main"),p=b(l),f=b(l),d((w=n((m=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,r(n,"nodeItem",w,i(n)),r(n,"nodeContent",h,i(n)),n}t(n,e);var a=n.prototype;return a.start=function(){var e=this;window.addEventListener("dragover",(function(e){e.preventDefault()})),window.addEventListener("drop",(function(n){var t;n.preventDefault();var r=null==(t=n.dataTransfer)?void 0:t.files[0];if(r){var i=new FileReader;i.readAsDataURL(r),i.onload=function(){var n=i.result;e.addNew({src:n,fileName:r.name})}}}))},a.addNew=function(e){var n=s(this.nodeItem);n.parent=this.nodeContent,n.getComponent(c).run(e)},n}(u)).prototype,"nodeItem",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=n(m.prototype,"nodeContent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=m))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/resources",["./fit-width-height.ts","./fit-width.ts","./interface.ts","./item.ts","./main.ts","./tools.ts"],(function(){return{setters:[null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/tools.ts",["cc","./browser.mjs_cjs=&original=.js","./browser.js"],(function(e){var t,n,o,r,a;return{setters:[function(e){t=e.cclegacy,n=e.ImageAsset,o=e.Texture2D,r=e.SpriteFrame},null,function(e){a=e.default}],execute:function(){t._RF.push({},"cf9f2LSI2JHCpTF6xvYYFxy","tools",void 0);e("tools",function(){function e(){}return e.removeBg=function(e){var t=this;return new Promise((function(n,o){var r=Date.now();console.log("开始时间：",r),a.default(e,{progress:function(e,t,n){},debug:!1,fetchArgs:{mode:"cors"}}).then((function(e){var o=URL.createObjectURL(e);console.log(o),t.blodToSpriteFrame(e).then((function(t){console.log("耗时："+(Date.now()-r)/1e3+" 秒"),n({spriteFrame:t,url:o,blob:e})}))}))}))},e.saveFileInBrowser=function(e,t){var n=window.URL||window.webkitURL,o=n.createObjectURL(e);if(t){var r=document.createElement("a");r.href=o,r.download=t,document.body.appendChild(r),r.click(),r.remove()}else window.location.href=o;n.revokeObjectURL(o)},e.blodToSpriteFrame=function(e){var t=this;return new Promise((function(n,o){t.blobToImageData(e).then((function(e){t.imageDataToSprieFram(e).then((function(e){n(e)}))}))}))},e.blobToImageData=function(e){return new Promise((function(t,n){var o=URL.createObjectURL(e),r=new Image;r.onload=function(){URL.revokeObjectURL(o);var e=document.createElement("canvas");e.width=r.width,e.height=r.height;var n=e.getContext("2d");n.drawImage(r,0,0);var a=n.getImageData(0,0,e.width,e.height);t(a)},r.onerror=n,r.src=o}))},e.imageDataToSprieFram=function(e){return new Promise((function(t,a){var i=new n;i.reset({_data:e.data,width:e.width,height:e.height,format:o.PixelFormat.RGBA8888,_compressed:!1});var c=new r,u=new o;u.image=i,c.texture=u,c.packable=!1,t(c)}))},e.Base64ToBlob=function(e){for(var t=e.split(",")[1],n=atob(t),o=new Uint8Array(n.length),r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return new Blob([o],{type:"image/png"})},e}());t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/resources', 'chunks:///_virtual/resources'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});